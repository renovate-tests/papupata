{"version":3,"sources":["webpack:///./src/components/IncludeAvailableFromContext.tsx","webpack:///./src/pages/guides/client/setup.tsx","webpack:///./src/components/api-components.tsx","webpack:///./src/components/guides.tsx"],"names":["IncludeAvailableFromContext","React","IndexPage","content","heading","anchor","to","level","Section","styled","section","SectionHeading","h4","SubHeading","h5","ExampleCommonContainer","Purpose","children","AvailableFrom","version","Usage","Parameters","includeAvailableFrom","label","Provider","value","Parameter","name","dataType","availableFrom","useContext","MethodReturnType","Caveats","Examples","Example","language","ExampleCommon","TypeParameters","Row","tr","NameColumn","td","DefaultValueColumn","DescriptionColumn","AvailableFromColumn","TypeParameter","defaultValue","Overview","Level0","Level1","GuideContent","map","child","style","marginLeft","key","href","Heading","id","FixedFont","span"],"mappings":"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","file":"component---src-pages-guides-client-setup-tsx-90cfa046bef257c3c55e.js","sourcesContent":["import * as React from 'react'\n\nexport const IncludeAvailableFromContext = React.createContext(false)\n","import * as React from 'react'\n\nimport Page from '../../../components/Page'\nimport Container from '../../../components/Container'\nimport IndexLayout from '../../../layouts'\nimport { FixedFont, GuideContent, Overview } from '../../../components/guides'\nimport { Example } from '../../../components/api-components'\nimport { Link } from 'gatsby'\n\nconst IndexPage = () => (\n  <IndexLayout>\n    <Page>\n      <Container>\n        <h1>Guide: setting up papupata for clients</h1>\n        <Overview>\n          When you want to use papupata to make API calls, you first need to set it up. This guide covers the most common cases and gives\n          pointer for less common ones.\n        </Overview>\n        <GuideContent\n          content={[\n            {\n              heading: 'Prerequisites',\n              anchor: 'prerequisites',\n              content: (\n                <>\n                  <p>\n                    Before starting this guide, you need to have an API declaration. For information on how\n                    to get there, see <Link to={'/guides/declaring'}>Declaring APIs</Link>.\n                  </p>\n                </>\n              )\n            },\n            {\n              heading: 'The Basics',\n              anchor: 'basics',\n              content: (\n                <>\n                  <p>There are a few things that always need to be set up when you want to make requests with papupata:</p>\n                  <ul>\n                    <li>Base URL, that is, where to connect to</li>\n                    <li>A mechanism for actually making requests</li>\n                  </ul>\n                  <p>As this time there are no other settings.</p>\n                  <p>\n                    The configuration happens using the <FixedFont>configure</FixedFont>\n                  </p>{' '}\n                  method on an API declaration.\n                  <Example>{`\n                    const API = new APIDeclaration()\n                    API.configure({\n                      baseUrl: 'https://example.com',\n                    })\n                  `}</Example>\n                  <p>\n                    If you want to only update some of the settings, you can get the existing configure and reconfigure the api declaration\n                    based on it.\n                  </p>\n                  <Example>{`\n                    const API = new APIDeclaration()\n                    API.configure({\n                      ...api.getConfig(),\n                      baseUrl: 'https://example.com',\n                    })\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'Base URL',\n              anchor: 'baseurl',\n              content: (\n                <>\n                  <p>\n                    The base URL is an URL where the declared APIs can be found. Typically it is either a blank string or combination of\n                    protocol and a hostname, but it is possible to include a path as well.\n                  </p>\n                  <p>\n                    In browser world APIs are commonly hosted from the same server that also hosts the client. In these situations you\n                    generally want the URLs to be relative to the root of the current host. This can be accomplished by passing in an empty\n                    string as the base URL.\n                  </p>\n                  <Example>{`\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: ''})\n                  await api() // invokes /hello\n                  `}</Example>\n                  <p>\n                    Sometimes the APIs are served by other servers, and if your client is a node.js application you are always going to have\n                    to provide an actual URL.\n                  </p>\n                  <Example>{`\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: 'https://www.example.com'})\n                  await api() // invokes https://www.example.com/hello\n                  `}</Example>\n                  <p>\n                    At times it might be beneficial to implement the APIs somewhere other than the root of the server. Typically it'd be\n                    better to include the path in the actual API paths, but the clients can also include it in the base URL.\n                  </p>\n                  <Example>{`\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: 'https://www.example.com/api'})\n                  await api() // invokes https://www.example.com/api/hello\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'Mechanism for making requests',\n              anchor: 'makeRequest',\n              content: (\n                <>\n                  <p>\n                    Making HTTP requests in typescript can be tricky because of varying capabilities of execution environments. Different\n                    browsers and node.js have different options available, some of which might or might not suit all your needs.\n                  </p>\n                  <p>\n                    Papupata makes no assumptions about the mechanism used to make the requests, instead one must be provided to it. This is\n                    done using the <FixedFont>makeRequest</FixedFont> configuration option.\n                  </p>\n                  <p>\n                    In many cases you might want to build your implementation, but there are two simple implementations provided with\n                    papupata, which can also serve as examples for your own implementations.\n                  </p>\n                </>\n              )\n            },\n            {\n              heading: 'fetchAdapter',\n              anchor: 'fetchAdapter',\n              level: 1,\n              content: (\n                <>\n                  <p>\n                    This utilizes global fetch, and as such is mostly suited for browsers. It only supports JSON bodies, responses can be\n                    either JSON or plain text. Any response codes above and including 400 cause a generic error to be thrown.\n                  </p>\n                  <p>Simply put, in its current state the adapter is only really suitable for extremely simple use cases.</p>\n                  <Example>{`\n                    import fetchAdapter from 'papupata/dist/main/fetch-adapter'\n                    API.configure({\n                      ...API.getConfig(),\n                      makeRequest: fetchAdapter\n                    })\n                  `}</Example>\n                  <p>Having said that, it should be fairly straightforward to expand the implementation to suit your needs.</p>\n                </>\n              )\n            },\n            {\n              heading: 'requestPromiseAdapter',\n              anchor: 'requestPromiseAdapter',\n              level: 1,\n              content: (\n                <>\n                  <p>\n                    This adapter utilizes request-promise and while certainly simple it is much better suited for many purposes. It should\n                    be usable on both node.js and browser environments, supports json and form data as well as non-object bodies.\n                  </p>\n                  <Example>{`\n                    import createRequestPromiseAdapter from 'papupata/dist/main/request-promise-adapter'\n                    API.configure({\n                      ...API.getConfig(),\n                      makeRequest: createRequestPromiseAdapter('json') // could pass 'form' for form data payloads\n                    })\n                  `}</Example>\n                  <p>\n                    Regardless, it is quite likely that you'll want to create your own version to add some little things you need, such as\n                    headers.\n                  </p>\n                </>\n              )\n            },\n            {\n              heading: 'Custom adapters',\n              anchor: 'customAdapter',\n              level: 1,\n              content: (\n                <>\n                  <p>\n                    As has probably become evident, you'll likely want to create a custom adapter of your own. The easiest option is\n                    probably to take one of the existing adapters to use it as a template.\n                  </p>\n                  <p>See <Link to={'/guides/client/customRequestAdapters'}>custom request adapters</Link> for more information.</p>\n                </>\n              )\n            },\n            {\n              heading: 'Conclusion',\n              anchor: 'conclusion',\n              content: (\n                <>\n                  <p>Now that papupata is set up to make requests, it should be a good time to make that happen!</p>\n                  <p>See <Link to=\"/guides/client/calling\">calling APIs</Link> for how to do exactly that.</p>\n                </>\n              )\n            }\n\n          ]}\n        />\n      </Container>\n    </Page>\n  </IndexLayout>\n)\n\nexport default IndexPage\n","import styled from 'styled-components'\r\nimport React, { ReactNode } from 'react'\r\nimport { Code } from './Code'\r\nimport { IncludeAvailableFromContext } from './IncludeAvailableFromContext'\r\n\r\nexport const Section = styled.section``\r\nexport const SectionHeading = styled.h4``\r\nexport const SubHeading = styled.h5``\r\nexport const ExampleCommonContainer = styled.section`\r\n  padding: 15px 30px;\r\n  background: lightyellow;\r\n`\r\n\r\nexport const Purpose: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Purpose</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport type ValidVersions = '1.1.0' | '1.2.0' | '1.5.0' | '1.8.0'\r\nexport const AvailableFrom = ({ version }: { version: ValidVersions }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Availability</SectionHeading>\r\n      This functionality is available from papupata version {version} onwards.\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Usage: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Usage</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\nexport const Parameters: React.FC<{ includeAvailableFrom?: boolean; label?: string }> = ({ children, includeAvailableFrom, label }) => {\r\n  return (\r\n    <Section>\r\n      <IncludeAvailableFromContext.Provider value={!!includeAvailableFrom}>\r\n        <SectionHeading>Parameters{label && `: ${label}`}</SectionHeading>\r\n        {children ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Type</th>\r\n                <th>Description</th>\r\n                {includeAvailableFrom && <th>Introduced in</th>}\r\n              </tr>\r\n            </thead>\r\n            <tbody>{children}</tbody>\r\n          </table>\r\n        ) : (\r\n          <p>There are no parameters.</p>\r\n        )}\r\n      </IncludeAvailableFromContext.Provider>\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Parameter: React.FC<{ name: string; dataType: any; availableFrom?: ValidVersions }> = ({\r\n  children,\r\n  name,\r\n  dataType,\r\n  availableFrom = '1.0.0'\r\n}) => {\r\n  const includeAvailableFrom = React.useContext(IncludeAvailableFromContext)\r\n  return (\r\n    <tr>\r\n      <td>{name}</td>\r\n      <td>{dataType}</td>\r\n      <td>{children}</td>\r\n      {includeAvailableFrom && <td>{availableFrom}</td>}\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport const MethodReturnType: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Returns</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Caveats: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Caveats</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\nexport const Examples: React.FC<{ children: any }> = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Examples</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Example: React.FC<{ label?: string; children: string }> = ({ children, label }) => {\r\n  return (\r\n    <>\r\n      {label && <SubHeading>{label}</SubHeading>}\r\n      <Code language={'typescript'}>{children}</Code>\r\n    </>\r\n  )\r\n}\r\n\r\nexport const ExampleCommon: React.FC<{ children: any }> = ({ children }) => {\r\n  return (\r\n    <ExampleCommonContainer>\r\n      <SubHeading>Common to examples below:</SubHeading>\r\n      {children}\r\n    </ExampleCommonContainer>\r\n  )\r\n}\r\n\r\nexport const TypeParameters: React.FC<{ children: ReactNode; includeAvailableFrom?: boolean }> = ({ children, includeAvailableFrom }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Type parameeters</SectionHeading>\r\n      <IncludeAvailableFromContext.Provider value={!!includeAvailableFrom}>\r\n        <SectionHeading>Parameters</SectionHeading>\r\n        {children ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Default value</th>\r\n                <th>Description</th>\r\n                {includeAvailableFrom ? <th>Introduced in</th> : ''}\r\n              </tr>\r\n            </thead>\r\n            <tbody>{children}</tbody>\r\n          </table>\r\n        ) : (\r\n          <p>There are no parameters.</p>\r\n        )}\r\n      </IncludeAvailableFromContext.Provider>\r\n    </Section>\r\n  )\r\n}\r\n\r\nconst Row = styled.tr``\r\nconst NameColumn = styled.td``\r\nconst DefaultValueColumn = styled.td``\r\nconst DescriptionColumn = styled.td``\r\nconst AvailableFromColumn = styled.td``\r\n\r\nexport const TypeParameter: React.FC<{ name: string; defaultValue?: string; availableFrom?: string }> = ({\r\n  children,\r\n  name,\r\n  defaultValue,\r\n  availableFrom = 'none'\r\n}) => {\r\n  const includeAvailableFrom = React.useContext(IncludeAvailableFromContext)\r\n  return (\r\n    <Row>\r\n      <NameColumn>{name}</NameColumn>\r\n      <DefaultValueColumn>{defaultValue}</DefaultValueColumn>\r\n      <DescriptionColumn>{children}</DescriptionColumn>\r\n      {includeAvailableFrom ? <AvailableFromColumn>{availableFrom}</AvailableFromColumn> : ''}\r\n    </Row>\r\n  )\r\n}\r\n","import React, { ReactNode } from 'react'\nimport { Section, SectionHeading } from './api-components'\nimport styled from 'styled-components'\n\nexport function Overview({ children }: { children: ReactNode }) {\n  return (\n    <Section>\n      <SectionHeading>Overview</SectionHeading>\n      {children}\n    </Section>\n  )\n}\n\ninterface GuidePart {\n  heading: ReactNode\n  anchor: string\n  content: ReactNode\n  level?: number\n}\n\nconst Level0 = styled.h4``\nconst Level1= styled.h5`\n  font-size: 1.1em;\n`\n\nexport function GuideContent({ content }: { content: GuidePart[] }) {\n  return (\n    <div>\n      <Section>\n        <SectionHeading>Table of contents</SectionHeading>\n        <ul>\n          {content.map(child => (\n            <li style={{ marginLeft: 18 * (child.level || 0) }} key={child.anchor}>\n              <a href={`#${child.anchor}`}>{child.heading}</a>\n            </li>\n          ))}\n        </ul>\n      </Section>\n      {content.map(child => {\n        const Heading = !child.level ? Level0 : Level1\n        return (\n          <Section id={child.anchor} key={child.anchor}>\n            <Heading>{child.heading}</Heading>\n            {child.content}\n          </Section>\n        )\n      })}\n    </div>\n  )\n}\n\nexport const FixedFont = styled.span`\n  font-family: \"Consolas\", \"Bitstream Vera Sans Mono\", \"Courier New\", Courier, monospace\n`\n"],"sourceRoot":""}